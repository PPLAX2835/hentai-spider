<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>detail</title>
    <link href="../js/layui/css/layui.css" rel="stylesheet">
</head>
<body>

    <div class="layui-row">

        <div class="layui-row">
            <legend id="aid"></legend>
            <legend id="aname"></legend>
            <table class="layui-hide" id="platform-artist-table" lay-filter="platform-artist-table"></table>
        </div>

    </div>


    <script src="../js/layui/layui.js"></script>
    <script src="../js/utils/UrlUtils.js"></script>

    <script>
        // 获得作者id，昵称
        let id = getUrlParams(window.location.href).id;
        let name = getUrlParams(window.location.href).name;

        let $ = layui.$;
        $('#aid').text("ID：" + id);
        $("#aname").text("name：" + name)


        layui.use('table', function () {
            var table = layui.table

            table.render({
                elem: '#platform-artist-table', // 指定table模板  也就是上方的table DOM
                height: 400, // 指定Table模板的高度
                url: '/api/platformArtist/' + id, // 对应的数据接口，这边直接是请求的json文件
                cellMinWidth: 120,
                cols: [[
                    // {checkbox: true, fixed: true},
                    {field:'artistId', title: 'artistId', width: 50, sort: true, fixed: true},
                    {field:'name', title: '该平台昵称', width: 50, sort: true, fixed: true},
                    {field:'homepageUrl', title: '该平台主页', minWidth: 80, sort: true, fixed: true},
                    {fixed: 'right', title: '操作', minWidth: 80, align: 'center', toolbar: '#platform-artist-table-theads-tool'}
                ]]
            });


            //行单击事件（双击事件为：rowDouble）
            table.on('tool(platform-artist-table)', function(obj){
                if(obj.event === 'delete'){
                    layer.confirm('真的删除行么', function(index){
                        obj.del();
                        layer.close(index);
                    });
                } else if(obj.event === 'edit'){
                    layer.open({
                        title: '编辑',
                        type: 1,
                        area: ['80%','80%'],
                        content: '<div style="padding: 16px;">自定义表单元素</div>'
                    });
                } else if (obj.event === 'platformView') {
                    layer.open({
                        title: '详情',
                        type: 1,
                        area: ['80%','20%'],
                        content: '<div>平台名:' + obj.data.platform.name + '</div> <div>地址：' + obj.data.platform.url + '</div>'
                    });
                }
            });

        })
    </script>

    <script type="text/html" id="platform-artist-table-theads-tool">
        <div class="layui-btn-container">
            <a type="button" class="layui-btn layui-btn-primary layui-btn-sm" lay-event="platformView">查看平台</a>
            <a type="button" class="layui-btn layui-btn-primary layui-btn-sm" lay-event="edit">编辑</a>
            <a type="button" class="layui-btn layui-btn-primary layui-btn-sm" lay-event="delete">删除</a>
        </div>
    </script>
</body>
</html>